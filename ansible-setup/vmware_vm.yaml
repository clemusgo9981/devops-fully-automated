plugin: vmware_vm_inventory

hostname: "{{ lookup('env', 'VMWARE_HOST') }}"
username: "{{ lookup('env', 'VMWARE_USERNAME') }}"
password: "{{ lookup('env', 'VMWARE_PASSWORD') }}"
validate_certs: false

properties:
  - 'name'
  - 'config.annotation'
  - 'guest.ipAddress'
  - 'summary.runtime.powerState'

# Filtering based on the VM state (running) and other annotations or properties if needed
filters:
  'summary.runtime.powerState': 'poweredOn'

# Grouping the VMs
keyed_groups:
  - key: 'config.annotation'
    prefix: 'env'
    separator: '_'
