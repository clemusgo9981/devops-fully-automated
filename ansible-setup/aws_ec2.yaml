plugin: aws_ec2

regions:
  - us-east-1
  - us-west-2
  - eu-west-1

# Filtering based on the VM state (running) and other annotations or properties if needed
filters:
  # All instances with their `Environment` tag set to `dev`
#  tag:Environment: dev
  # All dev and QA hosts
  tag:Environment:
    - dev
    - stage
    - prod
  # Getting the details of running instances only
  instance-state-name: running

# Grouping the instances based on tags
keyed_groups:
  - key: tags
    prefix: tag
